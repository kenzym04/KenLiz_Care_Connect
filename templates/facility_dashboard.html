{% extends "base.html" %}

{% block title %}Dashboard - {{ facility.name }}{% endblock %}

{% block content %}
<style>
    body {
        font-family: 'Helvetica Neue', Arial, sans-serif;
        background-color: #f8f9fa;
    }

    .container {
        max-width: 1000px;
        margin: auto;
        padding: 20px;
        background: #fff;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h2, h3 {
        color: #343a40;
    }

    .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
    }

    .btn-primary:hover {
        background-color: #0056b3;
        border-color: #004085;
    }

    .table {
        margin-top: 20px;
    }

    .table th, .table td {
        vertical-align: middle;
    }
</style>

<div class="container mt-5 mb-5">
    <h2 class="text-center mb-4">{{ facility.name }}, Welcome to your dashboard</h2>

    <div class="profile-section">
        <h3>Facility Profile</h3>
        <form method="POST" action="{{ url_for('update_facility_profile', facility_id=facility.id) }}">
            <div class="form-group mb-3">
                <label for="name">Facility Name:</label>
                <input type="text" class="form-control" id="name" name="name" value="{{ facility.name }}" maxlength="100" required>
            </div>
            <div class="form-group mb-3">
                <label for="email">Email:</label>
                <input type="email" class="form-control" id="email" name="email" value="{{ facility.email }}" maxlength="64" required>
            </div>
            <div class="form-group mb-3">
                <label for="phone">Phone Number: <small class="form-text">Kindly use international format (e.g., +1234567890).</small></label>
                <input type="text" class="form-control" id="phone" name="phone" value="{{ facility.phone }}" maxlength="25" required>
            </div>
            <div class="form-group mb-3">
                <label for="address">Address:</label>
                <input type="text" class="form-control" id="address" name="address" value="{{ facility.address }}" maxlength="254" required>
            </div>
            <div class="form-group mb-3">
                <label for="location">Location:</label>
                <input type="text" class="form-control" id="location" name="location" value="{{ facility.location }}" required>
            </div>
            <div class="form-group text-center">
                <button type="submit" class="btn btn-primary btn-lg">Update Profile</button>
            </div>
        </form>
    </div>

    <div class="invoice-section mt-5">
        <h3>Invoices</h3>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Invoice ID</th>
                    <th>Status</th>
                    <th>Amount</th>
                    <th>Date</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for invoice in facility.invoices %}
                <tr>
                    <td>{{ invoice.id }}</td>
                    <td>{{ invoice.status }}</td>
                    <td>{{ invoice.amount }}</td>
                    <td>{{ invoice.date }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('cancel_invoice', id=invoice.id) }}" class="d-inline">
                            <button type="submit" class="btn btn-danger">Cancel</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="health-workers-section mt-5">
        <h3>Health Workers</h3>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Address</th>
                    <th>Qualifications</th>
                    <th>Experience</th>
                </tr>
            </thead>
            <tbody>
                {% for worker in facility.health_workers %}
                <tr>
                    <td>{{ worker.name }}</td>
                    <td>{{ worker.email }}</td>
                    <td>{{ worker.phone }}</td>
                    <td>{{ worker.address }}</td>
                    <td>{{ worker.qualifications }}</td>
                    <td>{{ worker.experience }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>
{% endblock %}
